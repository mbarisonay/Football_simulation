var constructScriptUrl,injectTag,amzncsm=amzncsm||{};amzncsm.errorCodes={SLOT_INSIDE_UNFRIENDLY_FRAME:1,UNSUPPORTED_BROWSER:2,ERROR_SENDING_PIXEL:3,INVALID_API:4,MALFORMED_URL:5,VPAID_MISSING:8,VPAID_VIDEO_MISSING:9,VPAID_SLOT_MISSING:10,VPAID_ERROR:11},amzncsm.errors=[],amzncsm.reportErrors=function(){var a,b;for(a=0;a<amzncsm.errors.length;a++)b='{"adViewability":[{"error": {"m": "'+amzncsm.errors[a]+'"}}], "c": "viewability", "api": "RTB", "error": 1}',amzncsm.pixelQueue.firePixel(b,"");amzncsm.errors=[],amzncsm.detachAllHandlers()},function(a,b){function c(a){return a?a.replace(/^\s+|\s+$/g,""):void 0}function d(a){if(a&&a.s){var b,c=a.s.length>0?a.s[0]:"",d=a.s.length>1?a.s[1]:"";c&&(b=c.match(k)),b&&3==b.length||!d||(b=d.match(j)),b&&3==b.length&&(a.f=b[1],a.l=b[2])}}function e(a,b){if(b=b||{},!a)return{};a.m&&a.m.message&&(a=a.m);var e,j,k,l,m,n={m:f(a,b),c:a.c?""+a.c:a.c,s:[],l:a.l||a.line||a.lineno||a.lineNumber,name:a.name,type:a.type},o=0,p=0;if(e=a.stack||(a.err?a.err.stack:""),e&&e.split)for(j=e.split("\n");o<j.length&&n.s.length<h;)k=j[o++],k&&n.s.unshift(c(k));else for(l=g(a.args||arguments,"callee"),o=0,p=0;l&&h>o;)m=i,l.skipTrace||(k=l.toString(),k&&k.substr&&(m=0===p?4*i:m,m=1==p?2*i:m,n.s.unshift(k.substr(0,m)),p++)),l=g(l,"caller"),o++;return!n.f&&n.s.length>0&&d(n),n}function f(a,b){var c=b.m||b.message||"";return c+=a.m&&a.m.message?a.m.message:a.m&&a.m.target&&a.m.target.tagName?"Error handler invoked by "+a.m.target.tagName+" tag":a.m?a.m:a.message?a.message:"Unknown error"}function g(a,b){try{return a[b]}catch(c){return}}var h=20,i=256,j=/\(?([^\s]*):(\d+):\d+\)?/,k=/.*@(.*):(\d*)/;a.constructErrorMessage=e}(amzncsm,window),function(){var a=Array.prototype.slice;try{a.call(document.documentElement)}catch(b){Array.prototype.slice=function(b,c){var d,e,f,g,h,i;if(c="undefined"!=typeof c?c:this.length,"[object Array]"===Object.prototype.toString.call(this))return a.call(this,b,c);if(e=[],g=this.length,h=b||0,h=h>=0?h:g+h,i=c?c:g,0>c&&(i=g+c),f=i-h,f>0)if(e=new Array(f),this.charAt)for(d=0;f>d;d++)e[d]=this.charAt(h+d);else for(d=0;f>d;d++)e[d]=this[h+d];return e}}}(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var a=Object.prototype.toString,b=Array.isArray||function(b){return"[object Array]"===a.call(b)},c={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},d=function(a){return c[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)},e=/[\\"\u0000-\u001F\u2028\u2029]/g;return function f(c){var g,h,i,j;if(null==c)return"null";if("number"==typeof c)return isFinite(c)?c.toString():"null";if("boolean"==typeof c)return c.toString();if("object"==typeof c){if("function"==typeof c.toJSON)return f(c.toJSON());if(b(c)){for(g="[",h=0;h<c.length;h++)g+=(h?", ":"")+f(c[h]);return g+"]"}if("[object Object]"===a.call(c)){i=[];for(j in c)c.hasOwnProperty(j)&&i.push(f(j)+": "+f(c[j]));return"{"+i.join(", ")+"}"}}return'"'+c.toString().replace(e,d)+'"'}}()}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c,d=this.toString();return("number"!=typeof b||!isFinite(b)||Math.floor(b)!==b||b>d.length)&&(b=d.length),b-=a.length,c=d.indexOf(a,b),-1!==c&&c===b}),function(){if(window.Event){var a=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};a.prototype=window.Event.prototype,window.CustomEvent=a}}(),function(a){var b,c,d,e,f;a.performance||(a.performance={}),a.performance.now||(a.performance.now=performance.now||performance.webkitNow||performance.msNow||performance.mozNow),a.performance.now||(b=Date.now?Date.now():+new Date,performance.timing&&performance.timing&&(b=performance.timing.navigationStart),a.performance.now=function(){var a=Date.now?Date.now():+new Date;return a-b}),c=[],d={},e=function(a,b){for(var d=0,e=c.length,f=[];e>d;d++)c[d][a]==b&&f.push(c[d]);return f},f=function(a,b){for(var d,e=c.length;e--;)d=c[e],d.entryType!=a||void 0!==b&&d.name!=b||c.splice(e,1)},a.performance.mark||(a.performance.mark=a.performance.webkitMark||function(b){var e={name:b,entryType:"mark",startTime:a.performance.now(),duration:0};c.push(e),d[b]=e}),a.performance.measure||(a.performance.measure=a.performance.webkitMeasure||function(a,b,e){b=d[b].startTime,e=d[e].startTime,c.push({name:a,entryType:"measure",startTime:b,duration:e-b})}),a.performance.getEntriesByType||(a.performance.getEntriesByType=a.performance.webkitGetEntriesByType||function(a){return e("entryType",a)}),a.performance.getEntriesByName||(a.performance.getEntriesByName=a.performance.webkitGetEntriesByName||function(a){return e("name",a)}),a.performance.clearMarks||(a.performance.clearMarks=a.performance.webkitClearMarks||function(a){f("mark",a)}),a.performance.clearMeasures||(a.performance.clearMeasures=a.performance.webkitClearMeasures||function(a){f("measure",a)})}(window),amzncsm=amzncsm||{},amzncsm.log=function(a){try{-1!==window.location.href.indexOf("csm_debug_mode")&&window.console&&window.console.log(a)}catch(b){b.message&&amzncsm.errors.push(b.message)}},amzncsm.loadModules=function(a,b){var c,d,e;try{for(c=0;c<b.length;c++){if(d=b[c].name,e=b[c].params||[],window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&window.performance.mark("loadStart"+d+a),"[object Array]"!==Object.prototype.toString.call(e)&&amzncsm.log("Params passed in the amzncsm.loadModules methods must be an array"),amzncsm[d]){if(void 0===amzncsm[d].shortName)throw new amzncsm.invalidModuleException("Module shortName not defined for module "+d+". ");e.unshift(a),amzncsm[d].init.apply(amzncsm[d],e),amzncsm.log("Initiated "+d+" module")}else amzncsm.log("Undefined module "+d);window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&(window.performance.mark("loadEnd"+d+a),window.performance.measure("lt"+amzncsm[d].shortName+a,"loadStart"+d+a,"loadEnd"+d+a))}}catch(f){f.message&&amzncsm.errors.push(f.message)}},amzncsm.define=function(a){var b,c,d,e,f,g,h,i;try{for(b=function(a){return"string"==typeof a?amzncsm[a]:a},c=Array.prototype.slice.call(arguments),d=c[0],e=c.length>2?c[1]:[],f=c[c.length-1],g=[],h=0,i=e.length;i>h;h++)g.push(b(e[h]));amzncsm[d]=f.apply(f,g)}catch(j){j.message&&amzncsm.errors.push(j.message)}},amzncsm.invalidModuleException=function(a){this.value=a,this.message="does not conform to the expected format of a module",this.toString=function(){return this.value+this.message}},amzncsm.define("utils",[],function(){var a={shortName:"ut"};return a.init=function(a){},a.getIEVersion=function(){var a,b,c=-1;return"Microsoft Internet Explorer"==navigator.appName?(a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=b.exec(a)&&(c=parseFloat(RegExp.$1))):navigator.userAgent.match(/Trident.*rv\:11\./)?c=11:navigator.userAgent.match(/Edge\/\d+\.\d+/)&&(c=12),c},a.isIE=function(){var a=!1||!!document.documentMode,b=!a&&!!window.StyleMedia;return a||b},a.isFirefox=function(){return"undefined"!=typeof InstallTrigger},a.isIntObsSupported=function(){return"undefined"!=typeof IntersectionObserver},a.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&!navigator.userAgent.match("CriOS")},a.isSupportedBrowser=function(){return a.isIE()&&amzncsm.config.supportedBrowsers.IE===!0||a.isFirefox()&&amzncsm.config.supportedBrowsers.Firefox===!0||"undefined"!=typeof IntersectionObserver||a.isSafari()&&amzncsm.config.supportedBrowsers.Safari===!0},a.getPixelID=function(){var a=null;return function(){return null===a&&(a=Math.random().toString(36).substr(2)),a}}(),a.detachAllHandlers=function(){var a,b;for(b=0;b<amzncsm.eventHandlers.length;b++)a=amzncsm.eventHandlers[b],amzncsm.removeEvent(a.elem,a.eventName,a.cb)},a.reportClientError=function(a){var b=a===parseInt(a,10)?'{"m": "'+a+'"}':JSON.stringify(amzncsm.constructErrorMessage(a)),c='{"adViewability":[{"error": '+b+'}], "c": "viewability", "api": "RTB", "error": 1}';amzncsm.log("ERROR "+b),amzncsm.scrollImitationTimer&&clearInterval(amzncsm.scrollImitationTimer),amzncsm.pixelQueue.firePixel(c,"")},a.setTimeout=function(b,c){return setTimeout(function(){try{b.call()}catch(c){c.message&&amzncsm.log("Error: "+c.message),a.reportClientError(c)}},c)},a.setInterval=function(b,c){return setInterval(function(){try{b.call()}catch(c){c.message&&amzncsm.log("Error: "+c.message),a.reportClientError(c)}},c)},a}),amzncsm.define("eventUtils",[],function(){var a={shortName:"eu"};return a.init=function(b){a.eventHandlers=[]},a.addEvent=function(b,c,d,e){b.addEventListener?b.addEventListener(c,d,e):b.attachEvent&&b.attachEvent("on"+c,d);var f={elem:b,eventName:c,cb:d};a.eventHandlers.push(f)},a.addCustomEvent=function(a,b,c){document.addEventListener?document.addEventListener(a,b,c):document.attachEvent?document.attachEvent("on"+a,function(){return b.call(document,window.event)}):document["on"+a]=b},a.removeEvent=function(a,b,c){document.removeEventListener?a.removeEventListener(b,c,!1):document.detachEvent&&a.detachEvent("on"+b,c)},a.createEvent=function(){return document.createEvent?function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b}:function(a){var b=document.createEventObject();return b.eventType=a,b}}(),a.dispatchCustomEvent=function(b){document.dispatchEvent?document.dispatchEvent(a.createEvent(b)):document[b]?document[b]():document["on"+b]&&document["on"+b]()},a.stopPropagation=function(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)},a.preventDefault=function(a){a.preventDefault&&a.preventDefault(),a.returnValue=!1},a.getClickXY=function(a){return"pageX"in a?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.clientX+document.documentElement.scrollLeft,pageY:a.clientY+document.documentElement.scrollTop}},a.handleVisibilityChange=function(b,c){var d,e=b.document;"undefined"!=typeof e.hidden?d="visibilitychange":"undefined"!=typeof e.mozHidden?d="mozvisibilitychange":"undefined"!=typeof e.msHidden?d="msvisibilitychange":"undefined"!=typeof e.webkitHidden&&(d="webkitvisibilitychange"),d&&a.addEvent(e,d,c,!1)},a.isPageVisibilitySupported=function(){return"undefined"!=typeof document.hidden||"undefined"!=typeof document.mozHidden||"undefined"!=typeof document.msHidden||"undefined"!=typeof document.webkitHidden},a.registerPostMessageHandler=function(a){var b=window.addEventListener?"addEventListener":"attachEvent",c=window[b],d="attachEvent"==b?"onmessage":"message";c(d,function(b){var c=b.message?"message":"data",d=b[c];a(d)},!1)},a.getVisibilityState=function(a){return"undefined"==typeof a.visibilityState?"Unknown":a.visibilityState},a.documentHasFocus=function(a){var b=!0;try{b=a.hasFocus?a.hasFocus():!0}catch(c){amzncsm.reportClientError(c)}return b},a.isWindowActive=function(b){var c,d;return"undefined"!=typeof b.hidden?c="hidden":"undefined"!=typeof b.mozHidden?c="mozHidden":"undefined"!=typeof b.msHidden?c="msHidden":"undefined"!=typeof b.webkitHidden&&(c="webkitHidden"),d=a.documentHasFocus(b),"undefined"==typeof b[c]?d:!b[c]},a}),amzncsm.define("pixelQueue",[],function(){var a,b={shortName:"pq"},c=2500,d=4,e="${AAX_TYPE}",f="${AAX_PAYLOAD}",g={"v/":"v","atf/":"atf","btr/":"btr","":"other"},h={btr:"bt",atf:"at",v:"v",adCsm:"ac",adViewability:"av",other:"o"};return b.init=function(a){amzncsm.csmReport.pq={queue:[]}},b.getEncodedPayload=function(a){try{var b=JSON.parse(a);b.ver=amzncsm.version,a=JSON.stringify(b),a=a.replaceAll("%","<per>"),a=encodeURIComponent(a)}catch(c){}return a},b.sanitizePixelUrl=function(a,b){return/^https?:\/\//.test(a)===!1&&(a=document.location.protocol+"//"+a),b&&"/"!==a.substr(a.length-1)&&(a+="/"),"https:"===document.location.protocol&&/^http:\/\//.test(a)===!0&&(a=a.replace("http://","https://")),a},b.replacePixelMacro=function(a,b,c){var d=encodeURIComponent(b);return-1!==a.indexOf(d)?a.replace(d,c):a.replace(b,c)},b.constructInstrUrl=function(a,c,d){var e=b.sanitizePixelUrl(a,!0),f="?";return void 0!==d&&""!==d?e+=d:(e+="?p=",f="&"),e=e+c+f+"cb="+Math.round(1e7*Math.random())},b.constructMacroBasedUrl=function(a,c,d){var h=b.sanitizePixelUrl(a,!1),i=g[d];return h=b.replacePixelMacro(h,e,i),h=b.replacePixelMacro(h,f,c),h=h+"&cb="+Math.round(1e7*Math.random())},b.constructPixelUrl=function(a,c,d){return"instrUrl"===d||"iu"===d?b.constructInstrUrl(amzncsm.csmParams[d],a,c):b.constructMacroBasedUrl(amzncsm.csmParams[d],a,c)},b.getPixelUrls=function(a,c,d){var e,f=h[c],g=amzncsm.csmParams.pm||{},i=[],j=g[f]||["instrUrl"];for(e=0;e<j.length;e+=1)i.push(b.constructPixelUrl(a,d,j[e]));return i},b.getVuePixelType=function(a,b){var c=g[b],d=JSON.parse(a);return"other"===c&&(void 0!==d.adCsm?c="adCsm":void 0!==d.adViewability&&(c="adViewability")),c},b.firePixel=function(a,c){var d,e=b.getVuePixelType(a,c),f=b.getEncodedPayload(a),g=b.getPixelUrls(f,e,c);for(d=0;d<g.length;d+=1)(new Image).src=g[d]},a=function(){var a=amzncsm.csmReport.pq;a.queue.length>0&&(a.queue=[])},b.addPixel=function(b){var e=this,f=amzncsm.csmReport.pq;amzncsm.log("Received pixel "+b),0===f.queue.length&&amzncsm.setTimeout(function(){f.queue.length>0&&(e.send(),a())},c),f.queue.push(JSON.parse(b)),f.queue.length>=d&&(e.send(),a())},b.send=function(){var a=amzncsm.getPixelID(),c=(new Date).getTime(),d=amzncsm.csmReport.pq;b.firePixel('{"adCsm": '+JSON.stringify(d.queue)+', "pixelId": "'+a+'", "ts": '+c+"}","")},b}),!function(a,b){var c,d;if("object"==typeof exports&&"object"==typeof module)module.exports=b();else if("function"==typeof define&&define.amd)define([],b);else{c=b();for(d in c)("object"==typeof exports?exports:a)[d]=c[d]}}(window,function(){function a(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return b[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return c={},a.m=b=[function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={};b.init=function(a){d=a},b.addPixel=function(a){-1!==window.location.href.indexOf("tpm_debug_mode")&&TEST_IDS.push(a);var b=d.firePixel;return(void 0===b?function(){}:b).call(d,JSON.stringify(a),""),!0}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VENDOR_NAME="name",b.VENDOR_URL="url",b.VENDOR_URL_TYPE="type",b.VENDOR_URLS="urls",b.AD_ID="adId",b.UNDEFINED_TYPE="undefined",b.JS="js",b.TPM_DEBUG_MODE="tpm_debug_mode";var d=b.TPM_VENDOR_SCRIPT="tpmVendorScript",e=b.TPM_HTML="tpmHtml",f=b.START="Start";b.END="End",b.TOT="Tot",b.TPM_HTML_START=e+f,b.TPM_HTML_END=e+"End",b.TPM_HTML_TOT=e+"Tot",b.TPM_VENDOR_SCRIPT_START=d+f,b.TPM_VENDOR_SCRIPT_END=d+"End",b.TPM_VENDOR_SCRIPT_TOT=d+"Tot",b.SANDBOXED_IFRAME_VENDORS=["FRAUDSENSOR"]},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createSandboxedIFrame=function(a){var b=window.document.createElement("IFRAME");return b.id=a,b.height="0px !important",b.width="0px !important",b.style.visibility="hidden",b.style.opacity=0,b.style.top="-10000px",b.style.left="-10000px",b.sandbox="allow-scripts allow-same-origin allow-forms",b},b.createScript=function(a){var b=window.document.createElement("script");return b&&(b.type="text/javascript",b.src=a),b},b.checkWindowPerformanceExists=function(){return window.performance&&window.performance.mark&&"function"==typeof window.performance.mark}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.reportMalformedVendorCtxError=function(a){var b,c,f,g,h=!0,i=!1,j=void 0;try{for(c=Object.keys(a)[Symbol.iterator]();!(h=(b=c.next()).done);h=!0)f=b.value,f.toLowerCase().includes(e.VENDOR_URL)&&delete a[f]}catch(a){i=!0,j=a}finally{try{!h&&c["return"]&&c["return"]()}finally{if(i)throw j}}g={thirdPartyMeasurement:{error:{msg:"Malformed vendor context or vendor config not found",errorType:"MALFORMED_VENDOR_CONTEXT",vendorCtx:JSON.stringify(a)}}},d.addPixel(g)},b.reportResourceLoadingError=function(a,b,c){var f=new URL(c),g={thirdPartyMeasurement:{error:{msg:"Error loading vendorTag",errorType:"RESOURCE_LOADING_ERROR",vendorName:a[e.VENDOR_NAME],vendorUrlType:b,vendorEndPoint:f.hostname}}};d.addPixel(g)},b.reportIFrameError=function(a,b,c){var f={thirdPartyMeasurement:{error:{msg:"Error in IFrame "+a.name+": "+a.message,errorType:"IFRAME_ERROR",vendorName:b[e.VENDOR_NAME],vendorUrlType:c}}};d.addPixel(f)};var d=c(0),e=c(1)},function(a,b,c){"use strict";function d(a){var b,c;if(a&&a.__esModule)return a;if(b={},null!=a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(b,"__esModule",{value:!0}),b.TPM=void 0;var e=d(c(0)),f=d(c(5)),g=d(c(7)),h=d(c(3)),i=d(c(2)),j=c(8),k=c(1);b.TPM={init:function(a){var b,c,d,l=0<arguments.length&&void 0!==a?a:{},m=l.pixelQueue,n=void 0===m?{}:m,o=l.vendorCtxArr,p=void 0===o?[]:o,q=l.adId,r=void 0===q?"":q;try{e.init(n),b=-1!==window.location.href.indexOf(k.TPM_DEBUG_MODE),c=j.PROD_CDN_ENDPOINT,b&&(c=j.TEST_CDN_ENDPOINT),d=i.createSandboxedIFrame("tpmHTMLIFrame"+r),d.onload=function(){var a;i.checkWindowPerformanceExists()&&(window.performance.mark(k.TPM_HTML_END+r),window.performance.measure(k.TPM_HTML_TOT+r,k.TPM_HTML_START+r,k.TPM_HTML_END+r),a={thirdPartyMeasurement:{latency:{msg:"LS_TPM_HTML",tpmHtmlStart:window.performance.getEntriesByName(k.TPM_HTML_START+r)[0].startTime,tpmHtmlEnd:window.performance.getEntriesByName(k.TPM_HTML_END+r)[0].startTime,tpmHtmlTot:window.performance.getEntriesByName(k.TPM_HTML_TOT+r)[0].duration}}},e.addPixel(a)),p.forEach(function(a){f.checkVendorCtxSanity(a)?a[k.VENDOR_URLS].forEach(function(b){var e,g=b[k.VENDOR_URL_TYPE];f.checkVendorUrlSanity(b)&&g.includes(k.JS)&&(i.checkWindowPerformanceExists()&&window.performance.mark(k.TPM_VENDOR_SCRIPT_START+a[k.VENDOR_NAME]+g+r),e={vendorTag:f.getVendorTag(a,b),vendorCtx:a,vendorUrlType:g,adId:r},k.SANDBOXED_IFRAME_VENDORS.includes(a[k.VENDOR_NAME])?d.contentWindow.postMessage(e,c):f.appendVendorScript(e))}):h.reportMalformedVendorCtxError(a)})},i.checkWindowPerformanceExists()&&window.performance.mark(k.TPM_HTML_START+r),d.src=c+"/bao-csm/tpm/third_party_measurement.html",window.addEventListener("message",function(a){if(a.origin===c&&a.source===d.contentWindow&&a.data.adId===r)switch(a.data.msgType){case"vendorTagLoaded":f.reportVendorLatency(a.data.vendorCtx,a.data.vendorUrlType,r);break;case"vendorScriptLoadError":h.reportResourceLoadingError(a.data.vendorCtx,a.data.vendorUrlType,a.data.vendorTag);break;case"vendorScriptError":h.reportIFrameError(a.data.error,a.data.vendorCtx,a.data.vendorUrlType)}}),0<p.length&&window.document.body.appendChild(d)}catch(a){g.reportError(a)}}}},function(a,b,c){"use strict";function d(a){var b,c;if(a&&a.__esModule)return a;if(b={},null!=a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}var e,f,g,h,i,j,k;Object.defineProperty(b,"__esModule",{value:!0}),b.appendVendorScript=b.checkVendorUrlSanity=b.checkVendorCtxSanity=b.reportVendorLatency=b.getVendorTag=void 0,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=d(c(0)),g=c(1),h=c(6),i=d(c(2)),j=d(c(3)),b.getVendorTag=function(a,b){var c,d,e,f=new URL(b[g.VENDOR_URL]),h=!0,i=!1,j=void 0;try{for(d=Object.keys(a)[Symbol.iterator]();!(h=(c=d.next()).done);h=!0)e=c.value,[g.VENDOR_URLS,g.VENDOR_NAME].includes(e)||f.searchParams.append(e,a[e])}catch(a){i=!0,j=a}finally{try{!h&&d["return"]&&d["return"]()}finally{if(i)throw j}}return f.toString()},k=b.reportVendorLatency=function(a,b,c){var d,e=a[g.VENDOR_NAME];i.checkWindowPerformanceExists()&&(window.performance.mark(g.TPM_VENDOR_SCRIPT_END+e+b+c),window.performance.measure(g.TPM_VENDOR_SCRIPT_TOT+e+b+c,g.TPM_VENDOR_SCRIPT_START+e+b+c,g.TPM_VENDOR_SCRIPT_END+e+b+c)),d={thirdPartyMeasurement:{latency:{msg:"LS_"+e+"_"+b,vendorName:e,vendorUrlType:b,tpmStart:window.performance.getEntriesByName(g.TPM_VENDOR_SCRIPT_START+e+b+c)[0].startTime,tpmEnd:window.performance.getEntriesByName(g.TPM_VENDOR_SCRIPT_END+e+b+c)[0].startTime,tpmTot:window.performance.getEntriesByName(g.TPM_VENDOR_SCRIPT_TOT+e+b+c)[0].duration}}},f.addPixel(d)},b.checkVendorCtxSanity=function(a){return!h.isEmpty(a)&&e(a[g.VENDOR_NAME])!==g.UNDEFINED_TYPE&&e(a[g.VENDOR_URLS])!==g.UNDEFINED_TYPE},b.checkVendorUrlSanity=function(a){return!h.isEmpty(a)&&e(a[g.VENDOR_URL])!==g.UNDEFINED_TYPE&&e(a[g.VENDOR_URL_TYPE])!==g.UNDEFINED_TYPE},b.appendVendorScript=function(a){var b=i.createScript(a.vendorTag);b&&(b.onload=function(){k(a.vendorCtx,a.vendorUrlType,a.adId)},b.onerror=function(){j.reportResourceLoadingError(a.vendorCtx,a.vendorUrlType,a.vendorTag)},window.document.body.appendChild(b))}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isEmpty=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=c(1);b.isEmpty=function(a){return(void 0===a?"undefined":d(a))===e.UNDEFINED_TYPE||null===a||""===a}},function(a,b,c){"use strict";function d(a,b){try{return a[b]}catch(a){return}}Object.defineProperty(b,"__esModule",{value:!0}),b.reportError=function(a){var b=window.location.host+window.location.pathname,c={thirdPartyMeasurement:{error:{msg:a===parseInt(a,10)?{m:a,debug:encodeURIComponent(b.replace(/\//g,"_"))}:function(a,b){if(b=b||{},!a)return{};a.m&&a.m.message&&(a=a.m);var c,e,j,k,l,m={m:function(a,b){var c=b.m||b.message||"";return c+=a.m&&a.m.message?a.m.message:a.m&&a.m.target&&a.m.target.tagName?"Error handler invoked by "+a.m.target.tagName+" tag":a.m?a.m:a.message?a.message:"Unknown error"}(a,b),c:a.c?""+a.c:a.c,s:[],l:a.l||a.line||a.lineno||a.lineNumber,name:a.name,type:a.type},n=0,o=0;if((c=a.stack||(a.err?a.err.stack:""))&&c.split)for(e=c.split("\n");n<e.length&&m.s.length<f;)(j=e[n++])&&m.s.unshift(function(a){return a?a.replace(/^\s+|\s+$/g,""):void 0}(j));else for(k=d(a.args||arguments,"callee"),o=n=0;k&&f>n;)l=g,k.skipTrace||(j=k.toString())&&j.substr&&(l=0===o?4*g:l,l=1==o?2*g:l,m.s.unshift(j.substr(0,l)),o++),k=d(k,"caller"),n++;return!m.f&&0<m.s.length&&function(a){if(a&&a.s){var b,c=0<a.s.length?a.s[0]:"",d=1<a.s.length?a.s[1]:"";c&&(b=c.match(i)),b&&3==b.length||!d||(b=d.match(h)),b&&3==b.length&&(a.f=b[1],a.l=b[2])}}(m),m}(a),errorType:"TPM_ERROR"}}};e.addPixel(c)};var e=c(0),f=20,g=256,h=/\(?([^\s]*):(\d+):\d+\)?/,i=/.*@(.*):(\d*)/},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PROD_CDN_ENDPOINT="https://c.amazon-adsystem.com",b.TEST_CDN_ENDPOINT="https://d2mchadidjklqn.cloudfront.net"}],a.c=c,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,c){var d,e;if(1&c&&(b=a(b)),8&c)return b;if(4&c&&"object"==typeof b&&b&&b.__esModule)return b;if(d=Object.create(null),a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(e in b)a.d(d,e,function(a){return b[a]}.bind(null,e));return d},a.n=function(b){var c=b&&b.__esModule?function(){return b["default"]}:function(){return b};return a.d(c,"a",c),c},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="",a(a.s=4);var b,c}),amzncsm.define("videoViewability",[],function(){function a(){if(E===!1){E=!0,amzncsm.dispatchCustomEvent(t.event.BTR);try{amzncsm.pixelQueue.firePixel(JSON.stringify({measurementMethod:"btr_client"}),"btr/")}catch(a){amzncsm.reportClientError(a)}}}function b(){D=!0,amzncsm.dispatchCustomEvent(t.event.IMP_RECEIVED)}function c(){b()}function d(){b(),a()}function e(){amzncsm.dispatchCustomEvent(t.event.AD_COMPLETING)}function f(){b()}function g(){x.paused?k():i();for(var a in G)u.subscribe(G[a],a,this),u.eventStatus&&u.eventStatus[a]&&G[a]();x&&"function"==typeof x.addEventListener&&(x.addEventListener("pause",k),x.addEventListener("play",i),x.addEventListener("playing",i))}function h(){var a=Array.isArray(amzncsm.vendorCtxArr)&&0!==amzncsm.vendorCtxArr.length;a&&!w&&"undefined"!=typeof TPM&&(w=!0,TPM.init({pixelQueue:amzncsm.pixelQueue,vendorCtxArr:amzncsm.vendorCtxArr,adId:v})),b(),z||(z=!0,amzncsm.dispatchCustomEvent(t.event.VIDEO_ON))}function i(){h()}function j(){z=!1,amzncsm.dispatchCustomEvent(t.event.VIDEO_STOPPED)}function k(){z&&(z=!1,amzncsm.dispatchCustomEvent(t.event.VIDEO_OFF))}function l(){A=s(),A?amzncsm.dispatchCustomEvent(t.event.MUTE_ON):amzncsm.dispatchCustomEvent(t.event.MUTE_OFF)}function m(){r(),amzncsm.dispatchCustomEvent(t.event.SIZE_CHANGE)}function n(){amzncsm.utils.reportClientError(amzncsm.errorCodes.VPAID_ERROR)}function o(){amzncsm.dispatchCustomEvent(t.event.AD_SKIPPED)}function p(){q(),A=s(),B=!!x.autoplay,r()}function q(){try{C=u.getAdDuration(),C=parseInt(C),C=1e3*C}catch(a){amzncsm.reportClientError(a),C=null}}function r(){try{F=parseInt(u.attributes_.width)*parseInt(u.attributes_.height)}catch(a){amzncsm.reportClientError(a),F=x.offsetWidth*x.offsetHeight}}function s(){var a=u.getAdVolume();return 0===a}var t={shortName:"vv",event:{BTR:"amzncsmBtr",VIDEO_ON:"amzncsmVdoOn",VIDEO_OFF:"amzncsmVdoOff",MUTE_ON:"amzncsmVdoMuteOn",MUTE_OFF:"amzncsmVdoMuteOff",SIZE_CHANGE:"amzncsmVdoSizeChange",AD_COMPLETING:"amzncsmVdoCompleting",AD_SKIPPED:"amzncsmVdoSkipped",VIDEO_STOPPED:"amzncsmVdoStopped",IMP_RECEIVED:"amzncsmImpReceived"}},u=null,v=null,w=!1,x=null,y=null,z=!1,A=!1,B=!1,C=null,D=!1,E=!1,F=-1,G={AdStarted:h,AdStopped:j,AdPlaying:i,AdPaused:k,AdSizeChange:m,AdError:n,AdSkipped:o,AdVolumeChanged:l,AdImpression:f,AdVideoStart:d,AdVideoFirstQuartile:d,AdVideoMidpoint:c,AdVideoThirdQuartile:c,AdVideoComplete:e};return t.init=function(a,b,c){try{u=b,x=u.videoSlot_,y=c,v=a,g(),p()}catch(d){amzncsm.reportClientError(d)}},t.isVideoOn=function(){return z},t.isBtr=function(){return E},t.getAdElement=function(){return y},t.getAdDuration=function(){return C},t.isMute=function(){return A},t.isImpressionReceived=function(){return D},t.isAutoPlay=function(){return B},t.getPlayerSize=function(){return F},t}),amzncsm.define("viewDuration",["pixelQueue"],function(){var a,b={shortName:"vd"};return b.init=function(b){amzncsm.csmReport[b].vd={startts:0,totalduration:0,isVisible:!1,pixelReportTime:[2e3,4e3,8e3,16e3],setIntervalHandler:null,pCount:0};var c=amzncsm.csmReport[b].vd;c.visHandler=function(d){amzncsm.log("Current State: Visible"),c.isVisible===!1&&(c.startts=performance.now(),c.setIntervalHandler=amzncsm.setInterval(function(){a(b)},1e3)),c.isVisible=!0},amzncsm.addCustomEvent("amzncsmVis",c.visHandler,!1),c.invHandler=function(a){amzncsm.log("Current State: Invisible"),c.isVisible===!0&&(c.totalduration+=performance.now()-c.startts,window.clearInterval(c.setIntervalHandler)),c.isVisible=!1},amzncsm.addCustomEvent("amzncsmInv",c.invHandler,!1)},a=function(a){var b,c=amzncsm.csmReport[a].vd;if(c.isVisible===!0){for(b=performance.now()-c.startts;c.pCount<c.pixelReportTime.length&&b>=c.pixelReportTime[c.pCount];)c.totalduration+=b,amzncsm.pixelQueue.addPixel('{"vdr": '+b.toFixed(2)+', "tdr": '+c.totalduration.toFixed(2)+"}"),c.pCount++;c.pCount===c.pixelReportTime.length&&(window.clearInterval(c.setIntervalHandler),amzncsm.removeEvent(document,"amzncsmVis",c.visHandler),amzncsm.removeEvent(document,"amzncsmInv",c.invHandler),amzncsm.dispatchCustomEvent("amzncsmVdrcompl"))}},b}),amzncsm=amzncsm||{},constructScriptUrl=function(a,b){a=a.endsWith("/")?a.slice(0,-1):a;var c=Object.keys(b).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent("object"==typeof b[a]?JSON.stringify(b[a]):b[a])}).join("&");return a+"?"+c},injectTag=function(a,b){var c,d;"script"===a?(c=document.createElement("script"),c.src=b,document.body||(document.body=document.createElement("body")),document.body.appendChild(c)):"iframe"===a&&(d=document.createElement("iframe"),d.src=b,d.style.display="none",document.body||(document.body=document.createElement("body")),document.body.appendChild(d))},amzncsm.initPartnerScripts=function(a){var b,c,d,e,f,g,h,i,j;Object.prototype.hasOwnProperty.call(a,"ep")&&a.ep.length>0&&(b=a.ep,b.includes("paa")&&(c="https://s2.beta.paa-reporting-advertising.amazon/paa/rf_module_registration.html",d=constructScriptUrl(c,a),injectTag("iframe",d)),b.includes("ara")&&(e="https://d37unsldgykj8z.cloudfront.net/ara.js",f=constructScriptUrl(e,a),injectTag("script",f)),b.includes("forensics")&&(g="https://ts.amazon-adsystem.com/tg/resources/tq-forensics/adforensics_csmcollection.js",h=constructScriptUrl(g,a),injectTag("script",h)),b.includes("forensics-ntd")&&(i="https://ts.amazon-adsystem.com/tg/resources/tq-forensics/adforensics_basicv1.js",j=constructScriptUrl(i,a),injectTag("script",j)))},amzncsm.initVUEModule=function(a){if(Object.prototype.hasOwnProperty.call(a,"ep")&&a.ep.length>0){var b=a.ep;if(b.includes("vue"))return!0}return!1},amzncsm.define("domainMask",[],function(){function a(){var a,b,c,d,e,f="";if(window.location.ancestorOrigins?(a=Array.prototype.slice.call(window.location.ancestorOrigins),f=a[a.length-1]):parent===top&&(f=document.referrer,a=[]),b=/https?:\/\/([^\/]*)/,c=f.match(b),c){for(e=0;e<a.length;e++)d=a[e].match(b),a[e]=d?encodeURIComponent(d[1]):encodeURIComponent(a[e]);top.postMessage(c[1],"*"),amzncsm.log("detect_domain_mask module - Top level domain url "+c[1]),amzncsm.pixelQueue.addPixel('{"tld": "'+encodeURIComponent(c[1])+'", "nl":'+(a.length+1)+"}")}}var b={shortName:"dm"};return b.init=function(b){a()},b}),amzncsm.detectViewability=function(a,b,c,d){function e(){return amzncsm.videoViewability.getPlayerSize()<A?.9:.5}function f(){var a=B,b=amzncsm.videoViewability.getAdDuration();return b&&(a=b/2,a>B&&(a=B)),a}function g(){return y.beaconSent.iab&&y.beaconSent.groupm&&y.beaconSent.publicis&&y.beaconSent.mrc&&y.beaconSent.vdr}function h(a,b){if(y.getDuration){var c=y.end-y.start;w(b+" viewed for: "+c),y.totalTime+=c}}function i(a){w(a+" IN VIEW"),x(!0)}function j(a){w(a+" NOT IN VIEW"),x(!1)}function k(){if(y.beaconSent.iab!==!0)try{var a=y.detectActualDimension(y.adElementContainer),b=amzncsm.isWindowActive(y.hostDoc),c=a>=y.iabAreaCutoff-.05&&b;c&&(t("viewable",{viewable:!0,defn:"iab",p:(100*y.area).toFixed(),t:o(y.timerIabStartTime)}),w(y.adElementContainer+" displayed for "+y.iabTimeCutoff/1e3+" seconds"),y.beaconSent.iab=!0,amzncsm.dispatchCustomEvent("amzncsmIabView"),p())}catch(d){w(d),amzncsm.reportClientError(d)}}function l(){if(y.beaconSent.mrc!==!0)try{var a=y.detectActualDimension(y.adElementContainer),b=amzncsm.isWindowActive(y.hostDoc),c=a>=y.mrcAreaCutoff&&b;c&&(t("viewable",{viewable:!0,defn:"mrc",p:(100*y.area).toFixed(),t:o(y.timerMrcStartTime)}),w(y.adElementContainer+" displayed for "+y.mrcTimeCutoff/1e3+" seconds"),y.beaconSent.mrc=!0,p())}catch(d){w(d),amzncsm.reportClientError(d)}}function m(){if(y.beaconSent.groupm!==!0)try{var a=y.detectActualDimension(y.adElementContainer),b=amzncsm.isWindowActive(y.hostDoc),c=a>=y.groupmAreaCutoff-.05&&b;c&&(t("viewable",{viewable:!0,defn:"groupm",p:(100*y.area).toFixed(),t:o(y.timerGroupmStartTime)}),w(y.adElementContainer+" displayed for "+y.groupmTimeCutoff/1e3+" seconds"),y.beaconSent.groupm=!0,p())}catch(d){w(d),amzncsm.reportClientError(d)}}function n(){if(y.beaconSent.publicis!==!0)try{
var a=y.detectActualDimension(y.adElementContainer),b=amzncsm.isWindowActive(y.hostDoc),c=a>=y.publicisAreaCutoff-.05&&b;c&&(t("viewable",{viewable:!0,defn:"publicis",p:(100*y.area).toFixed(),t:o(y.timerPublicisStartTime)}),w(y.adElementContainer+" displayed for "+y.publicisTimeCutoff/1e3+" seconds"),y.beaconSent.publicis=!0,p())}catch(d){w(d),amzncsm.reportClientError(d)}}function o(a){return((Date.now()-a)/1e3).toFixed(3)}function p(){g()&&amzncsm.scrollImitationTimer&&clearInterval(amzncsm.scrollImitationTimer)}function q(a){x(a>y.iabAreaCutoff&&amzncsm.isWindowActive(y.hostDoc)?!0:!1)}function r(a,b,c,d,e){var f=0,g=!1,h=!0;y.visibilityState=amzncsm.getVisibilityState(y.hostDoc),amzncsm.isIntObsSupported()?g=!0:amzncsm.isIE()?f=y.fractionInViewportIE(a,b,y.hostWindow,y.hostDoc):amzncsm.isFirefox()?f=y.fractionInViewportFF(a,b):amzncsm.isSafari()?(y.fractionInViewportSafari(c,d),g=!0):h=!1,e||(g=!1,f=y.area),0>f&&(h=!1),h===!1&&c===!0&&t("unmeasured",{defn:"unmeasured",p:0,t:0,dbg:"u3"}),g===!1&&h===!0&&d(f)}function s(){y.beaconSent.atf!==!0&&null!==y.atfPayload&&(y.beaconSent.atf=!0,v(y.atfPayload,"atf/"))}function t(a,b){function c(){return y.atfPayload='{"atf": '+b.atf+', "vs": "'+(void 0!==y.visibilityState?y.visibilityState:"undefined")+'", '+(null!=y.leftPos&&isNaN(y.leftPos)===!1?'"left": '+y.leftPos.toFixed(0)+", ":"")+(null!=y.topPos&&isNaN(y.topPos)===!1?'"top": '+y.topPos.toFixed(0)+", ":"")+'"ah": '+(void 0!==y.adHeight?y.adHeight:'"undefined"')+', "aw": '+(void 0!==y.adWidth?y.adWidth:'"undefined"')+', "isP": '+(null!=top.opener?1:0)+', "ts": '+d+', "is3p": "'+amzncsm.config.is3p+'", "pixelId": "'+y.pixelId+'"}',y.atfPayload}var d,e,f;if(("above_the_fold"!==a&&"unmeasured"!==a||y.beaconSent.atf!==!0)&&("viewable"!==a||y.beaconSent[b.defn]!==!0)){d=(new Date).getTime(),b.viewable===!0&&window.performance&&window.performance.timing&&(e=((d-(window.performance.timing.responseStart||window.performance.timing.domLoading))/1e3).toFixed(2));try{switch(a){case"above_the_fold":f=c(),amzncsm.videoViewability.isImpressionReceived()&&(y.beaconSent.atf=!0,v(f,"atf/"));break;case"viewable":s(),v('{"v": {"p": '+b.p+', "t": '+b.t+', "def": "'+b.defn+'"}, "vs": "'+(void 0!==y.visibilityState?y.visibilityState:"undefined")+'", '+(null!=y.leftPos&&isNaN(y.leftPos)===!1?'"left": '+y.leftPos.toFixed(0)+", ":"")+(null!=y.topPos&&isNaN(y.topPos)===!1?'"top": '+y.topPos.toFixed(0)+", ":"")+'"ah": '+(void 0!==y.adHeight?y.adHeight:'"undefined"')+', "aw": '+(void 0!==y.adWidth?y.adWidth:'"undefined"')+', "ttv": '+(void 0!==e?e:'"undefined"')+', "ts": '+d+", "+("groupm"===b.defn?'"tco": '+y.groupmTimeCutoff+",":"")+("publicis"===b.defn?'"aco": '+y.publicisAreaCutoff+",":"")+'"pixelId": "'+y.pixelId+'"}',"v/");break;case"unmeasured":y.beaconSent.atf=!0,v('{"atf": "unknown", "ts": '+d+', "is3p": "'+amzncsm.config.is3p+'", "pixelId": "'+y.pixelId+'", "dbg": "'+b.dbg+'"}',"atf/")}}catch(g){w(g),amzncsm.reportClientError(g)}}}function u(a,b){function c(){y.beaconSent.iab===!1&&(y.timerIab&&(w("Cleared setTimeout call for IAB"),clearTimeout(y.timerIab)),y.timerIabStartTime=Date.now(),y.timerIab=amzncsm.setTimeout(function(){w("Setting function on setTimeout for IAB"),k()},y.iabTimeCutoff))}function d(){!y.timerStartedIab&&amzncsm.videoViewability.isVideoOn()&&y.area>y.iabAreaCutoff&&amzncsm.isWindowActive(y.hostDoc)&&(i(B),y.start=(new Date).getTime()/1e3,c(),y.timerStartedIab=!0)}function e(){clearTimeout(y.timerIab),y.timerStartedIab=!1,y.timerIabStartTime=null,y.end=(new Date).getTime()/1e3,j(B),h(A,B)}function f(){y.beaconSent.mrc===!1&&(y.timerMrc&&(w("Cleared setTimeout call for MRC"),clearTimeout(y.timerMrc)),y.timerMrcStartTime=Date.now(),y.timerMrc=amzncsm.setTimeout(function(){w("Setting function on setTimeout for MRC"),l()},y.mrcTimeCutoff))}function g(){!y.timerStartedMrc&&amzncsm.videoViewability.isBtr()&&amzncsm.videoViewability.isVideoOn()&&y.area>=y.mrcAreaCutoff&&amzncsm.isWindowActive(y.hostDoc)&&(i(B),f(),y.timerStartedMrc=!0)}function o(){clearTimeout(y.timerMrc),y.timerStartedMrc=!1,y.timerMrcStartTime=null}function p(){y.beaconSent.groupm===!1&&(y.timerGroupm&&(w("Cleared setTimeout call for GroupM"),clearTimeout(y.timerGroupm)),y.timerGroupmStartTime=Date.now(),y.timerGroupm=amzncsm.setTimeout(function(){w("Setting function on setTimeout for GroupM"),m()},y.groupmTimeCutoff))}function s(){!y.timerStartedGroupm&&amzncsm.videoViewability.isVideoOn()&&!amzncsm.videoViewability.isMute()&&!amzncsm.videoViewability.isAutoPlay()&&y.area>y.groupmAreaCutoff&&amzncsm.isWindowActive(y.hostDoc)&&(p(),y.timerStartedGroupm=!0)}function u(){clearTimeout(y.timerGroupm),y.timerStartedGroupm=!1,y.timerGroupmStartTime=null}function v(){y.beaconSent.publicis===!1&&(y.timerPublicis&&(w("Cleared setTimeout call for Publicis"),clearTimeout(y.timerPublicis)),y.timerPublicisStartTime=Date.now(),y.timerPublicis=amzncsm.setTimeout(function(){w("Setting function on setTimeout for Publicis"),n()},y.publicisTimeCutoff))}function x(){!y.timerStartedPublicis&&amzncsm.videoViewability.isVideoOn()&&y.area>y.publicisAreaCutoff&&amzncsm.isWindowActive(y.hostDoc)&&(v(),y.timerStartedPublicis=!0)}function z(){clearTimeout(y.timerPublicis),y.timerPublicisStartTime=null,y.timerStartedPublicis=!1}var A,B,C,D,E;b=b||!1,A=y.adElement,B=y.adElementContainer,C=y.adID,amzncsm.checkAndStartIabTimer=d,amzncsm.resetIabTimer=e,amzncsm.checkAndStartMrcTimer=g,amzncsm.resetMrcTimer=o,amzncsm.checkAndStartGroupmTimer=s,amzncsm.resetGroupmTimer=u,amzncsm.checkAndStartPublicisTimer=x,amzncsm.resetPublicisTimer=z,D=function(a){var b=amzncsm.isWindowActive(y.hostDoc),c=!1;y.area=a,w("Area fraction inside viewport "+y.area+" hasFocus "+b),c=y.area>=y.iabAreaCutoff,b&&(y.area>=y.iabAreaCutoff&&d(),y.area>=y.mrcAreaCutoff&&g(),y.area>=y.groupmAreaCutoff&&s(),y.area>=y.publicisAreaCutoff&&x()),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&(window.performance.mark("atfCompEnd"+C),window.performance.measure("atfComp"+C,"atfCompStart"+C,"atfCompEnd"+C)),amzncsm.setTimeout(function(){t("above_the_fold",{atf:c})},100)},E=function(a){(y.beaconSent.iab===!1||y.beaconSent.groupm===!1||y.beaconSent.publicis===!1||y.beaconSent.mrc===!1)&&(w("Old area "+y.area+" current area "+a),amzncsm.isWindowActive(y.hostDoc)?(y.focused=!0,a>=y.iabAreaCutoff&&y.timerStartedIab===!1?(y.area=a,d()):a<y.iabAreaCutoff&&y.timerStartedIab===!0&&(w("IAB - Element is not enough visible. Clearing the timer"),e()),a>=y.mrcAreaCutoff&&y.timerStartedMrc===!1?(y.area=a,g()):a<y.mrcAreaCutoff&&y.timerStartedMrc===!0&&(w("MRC - Element is not enough visible. Clearing the timer"),o()),a>=y.groupmAreaCutoff&&y.timerStartedGroupm===!1?(y.area=a,s()):a<y.groupmAreaCutoff&&y.timerStartedGroupm===!0&&(w("GroupM - Element is not enough visible. Clearing the timer"),u()),a>=y.publicisAreaCutoff&&y.timerStartedPublicis===!1?(y.area=a,x()):a<y.publicisAreaCutoff&&y.timerStartedPublicis===!0&&(w("Publicis - Element is not enough visible. Clearing the timer"),z())):(w("Element out of focus. Clearing the timer"),e(),o(),u(),z(),y.focused=!1)),q(a),y.area=a},a===!0?(amzncsm.isIntObsSupported()?y.initViewCompIntObs(D,E):amzncsm.isSafari()&&y.initVCompSafari(),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&window.performance.mark("atfCompStart"+C),r(A,B,a,D,b)):r(A,B,a,E,b)}function v(){var a=Array.prototype.slice.call(arguments);amzncsm.pixelQueue.firePixel.apply(amzncsm.beacon,a)}function w(a){try{y.debug&&window.console&&window.console.log(a)}catch(b){}}function x(a){y.beaconSent.vdr!==!0&&(a===!0?amzncsm.dispatchCustomEvent("amzncsmVis"):amzncsm.dispatchCustomEvent("amzncsmInv"))}var y=this,z=amzncsm.isSafari()?500:1e3,A=242500,B=15e3;return this.adElement=a,this.adElementContainer=a,this.adWidth=a.document?a.document.body.offsetWidth:a.offsetWidth,this.adHeight=a.document?a.document.body.offsetHeight:a.offsetHeight,this.adID=d,this.getDuration=!0,this.totalTime=0,this.leftPos=null,this.topPos=null,this.start=null,this.end=null,this.area=0,this.iabAreaCutoff=.5,this.mrcAreaCutoff=.5,this.groupmAreaCutoff=.9,this.publicisAreaCutoff=e(),this.iabTimeCutoff=2e3,this.mrcTimeCutoff=2e3,this.groupmTimeCutoff=f(),this.publicisTimeCutoff=2e3,this.focused=null,this.timerIab=!1,this.timerMrc=!1,this.timerStartedIab=!1,this.timerStartedMrc=!1,this.timerGroupm=!1,this.timerStartedGroupm=!1,this.timerIabStartTime=null,this.timerMrcStartTime=null,this.timerGroupmStartTime=null,this.timerPublicisStartTime=null,this.beaconSent={atf:!1,iab:!1,mrc:!1,groupm:!1,publicis:!0,vdr:!1},this.hostWindow=b,this.hostDoc=c,this.pixelId=amzncsm.getPixelID(),this.atfPayload=null,amzncsm.visibilityIO=!1,amzncsm.IOV2Supported=!1,amzncsm.isSupportedBrowser()===!1?(t("unmeasured",{defn:"unmeasured",p:0,t:0,dbg:"u2"}),!1):(amzncsm.csmReport[this.adID].container=this.adElementContainer,amzncsm.csmReport[this.adID].adElement=this.adElement,this.debug=-1!==window.location.href.indexOf("csm_debug_mode"),this.profile=-1!==window.location.href.indexOf("amzn_profile_mode"),amzncsm.log=w,void(this.collectData=function(){function a(a){c.beaconSent.atf===!1&&(amzncsm.resetIabTimer(),amzncsm.resetMrcTimer(),amzncsm.resetGroupmTimer(),amzncsm.resetPublicisTimer(),s(),t("unmeasured",{defn:"unmeasured",p:0,t:0,dbg:a}))}var b,c=this;u(!0,!0),b=function(a){try{if(document.visibilityState&&amzncsm.log("Visibility State "+document.visibilityState),g()===!1&&amzncsm.isWindowActive(c.hostDoc))var b=amzncsm.setTimeout(function(){b&&clearTimeout(b);var c=!(a&&a.type.includes("visibilitychange"));u(!1,c)},50);else x(!1),amzncsm.resetIabTimer(),amzncsm.resetMrcTimer()}catch(d){w(d),amzncsm.reportClientError(d)}},amzncsm.scrollImitationTimer=amzncsm.setInterval(function(){if(amzncsm.isIntObsSupported());else if(amzncsm.isFirefox())(!c.oldMozInnerScreenX||!c.oldMozInnerScreenY||Math.abs(window.mozInnerScreenX-c.oldMozInnerScreenX)>10||Math.abs(window.mozInnerScreenY-c.oldMozInnerScreenY)>10)&&(amzncsm.log("Triggered deep check"),b()),c.oldMozInnerScreenX=window.mozInnerScreenX,c.oldMozInnerScreenY=window.mozInnerScreenY;else if(amzncsm.isIE()){var a=c.hostDoc.elementFromPoint(c.adWidth/2,c.adHeight/2);null!=a&&amzncsm.isWindowActive(c.hostDoc)?(amzncsm.log("Triggered deep check"),b()):x(!1)}else amzncsm.isSafari()&&b()},z),amzncsm.handleVisibilityChange(this.hostWindow,b),amzncsm.addEvent(this.hostWindow,"resize",b,!1),amzncsm.isIntObsSupported()&&amzncsm.addCustomEvent("amzncsmVChng",function(a){b()}),amzncsm.addCustomEvent("amzncsmVdrcompl",function(a){c.beaconSent.vdr=!0}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.VIDEO_ON,function(){amzncsm.checkAndStartIabTimer(),amzncsm.checkAndStartMrcTimer(),amzncsm.checkAndStartGroupmTimer(),amzncsm.checkAndStartPublicisTimer()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.BTR,function(){amzncsm.checkAndStartMrcTimer()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.VIDEO_OFF,function(){amzncsm.resetIabTimer(),amzncsm.resetMrcTimer(),amzncsm.resetGroupmTimer(),amzncsm.resetPublicisTimer()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.MUTE_ON,function(){amzncsm.resetGroupmTimer()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.MUTE_OFF,function(){amzncsm.checkAndStartGroupmTimer()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.SIZE_CHANGE,function(){c.publicisAreaCutoff=e(),b()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.IMP_RECEIVED,function(){s()}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.AD_COMPLETING,function(){a("u4")}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.AD_SKIPPED,function(){a("u5")}),amzncsm.addCustomEvent(amzncsm.videoViewability.event.VIDEO_STOPPED,function(){a("u6")})}))},amzncsm.extend=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a.prototype[c]=b[c])},amzncsm.rmVP=function(a,b,c){var d,e,f,g,h,i,j;try{if(amzncsm.initPartnerScripts(c),!amzncsm.initVUEModule(c))return;if(amzncsm.instrURL=a,!a)throw amzncsm.errorCodes.MALFORMED_URL;if(!b)throw amzncsm.errorCodes.VPAID_MISSING;if(!b.videoSlot_)throw amzncsm.errorCodes.VPAID_VIDEO_MISSING;if(!b.slot_)throw amzncsm.errorCodes.VPAID_SLOT_MISSING;if(amzncsm.csmInitialized)return;if(amzncsm.csmInitialized=!0,c=c||{},amzncsm.csmParams=c,amzncsm.vendorCtxArr=null==c.vendorCtxArr?[]:c.vendorCtxArr,d=function(a){var b=a.readyState;return"complete"==b},e=function(a){var b={atf:"unknown",pixelId:amzncsm.utils.getPixelID(),dbg:a};amzncsm.pixelQueue.firePixel(JSON.stringify(b),"atf/")},f=null,b.videoSlot_.ownerDocument?f=b.videoSlot_:b.slot_.ownerDocument&&(f=b.slot_),null===f)return void e("u1");g=f.ownerDocument,h=g.defaultView||g.parentWindow,i={e:f,w:h,d:g,vpObj:b},j="VDO",d(g)?amzncsm.rm(j,i):void 0===document.onreadystatechange?amzncsm.rm(j,i):g.onreadystatechange=function(){try{d(g)&&amzncsm.rm(j,i)}catch(a){amzncsm.utils.reportClientError(a)}}}catch(k){amzncsm.utils.reportClientError(k)}},amzncsm.extend(amzncsm.detectViewability,{getIframeWindowDimension:function(a,b){var c,d,e,f,g,h=b.body,i=a.innerWidth||b.documentElement.clientWidth||h.clientWidth||640,j=a.innerHeight||b.documentElement.clientHeight||h.clientHeight||480;return window.mozInnerScreenX&&window.mozInnerScreenY&&(c=90,d=a.mozInnerScreenX,e=a.mozInnerScreenY-c-10,f=window.screen.availWidth,g=window.screen.availHeight-c,0!=d&&(0>d?(i+=d,i=Math.max(0,i)):d>f?i=0:f-d>i||(i=f-d),i=Math.min(i,f)),0!=e&&(0>e?(j+=e,j=Math.max(0,j)):g>e?g-e>j||(j=g-e+2):j=0),j=Math.min(j,g)),{width:i,height:j}},getViewPortSize:function(a){var b={width:1/0,height:1/0,area:1/0};return!isNaN(a.document.body.clientWidth)&&a.document.body.clientWidth>0&&(b.width=a.document.body.clientWidth),!isNaN(a.document.body.clientHeight)&&a.document.body.clientHeight>0&&(b.height=a.document.body.clientHeight),a.document.documentElement&&a.document.documentElement.clientWidth&&!isNaN(a.document.documentElement.clientWidth)&&(b.width=a.document.documentElement.clientWidth),a.document.documentElement&&a.document.documentElement.clientHeight&&!isNaN(a.document.documentElement.clientHeight)&&(b.height=a.document.documentElement.clientHeight),a.innerWidth&&!isNaN(a.innerWidth)&&(b.width=Math.min(b.width,a.innerWidth)),a.innerHeight&&!isNaN(a.innerHeight)&&(b.height=Math.min(b.height,a.innerHeight)),b.area=b.height*b.width,b},fractionInViewportIE:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(c=c||window,d=d||document,e=a.offsetWidth,f=a.offsetHeight,g=Number.MAX_VALUE,h=Number.MAX_VALUE,i=Number.MIN_VALUE,j=Number.MIN_VALUE,k=10,l=0,m=this.getIframeWindowDimension(c,d),n=m.width,o=m.height,p=(n/k+1)*(o/k+1),q=0;n>=q;q+=k)for(r=0;o>=r;r+=k)s=d.elementFromPoint(q,r),null!=s&&(l++,g>q?g=q:q>i&&(i=q),h>r?h=r:r>j&&(j=r));return e=i-g,f=j-h,(0>=e||0>=f)&&(e=0,f=0),amzncsm.log("IE: ad slot visible width = "+e+" height = "+f),amzncsm.log("IE: visiblePoints "+l+" totalPoints "+p+" visibleFraction "+l/p),0!=p?l/p:0},fractionInViewportFF:function(a,b){var c,d,e,f,g,h,i,j,k,l;return!window.mozInnerScreenX&&0!==window.mozInnerScreenX||!window.mozInnerScreenY&&0!==window.mozInnerScreenY?-1:(c=this.getIframeWindowDimension(window,document),d=c.width,e=c.height,f=b.offsetWidth,g=b.offsetHeight,h=100,this.leftPos=window.mozInnerScreenX,this.topPos=window.mozInnerScreenY-h,i=f,j=g,k=this.topPos,l=this.leftPos,l>=0&&(l=a.getBoundingClientRect().left),k>=0&&(k=a.getBoundingClientRect().top),0>k&&(j+=k),k+g>e&&(j-=k+g-e),0>l&&(i+=l),l+f>d&&(i-=l+f-d),0>i&&(i=0),i>f&&(i=f),0>j&&(j=0),j>g&&(j=g),amzncsm.log("Visible Width: "+i+" Visible Height: "+j+" Actual Width: "+f+" Actual Height: "+g+" winWidth "+d+" winHeight "+e),0!=g&&0!=f?i*j/(g*f):0)},initViewCompIntObs:function(a,b){function c(c){c.forEach(function(c){var e,f,g,h;"undefined"!=typeof c.isVisible&&(amzncsm.visibilityIO=c.isVisible,amzncsm.IOV2Supported=!0),e=c.boundingClientRect,f=c.intersectionRect,g=e.width*e.height,null!=g&&isNaN(g)===!1&&g>0&&(h=f.width*f.height/g,d===!1?(d=!0,a.call(null,h)):(b.call(null,h),amzncsm.dispatchCustomEvent("amzncsmVChng")))})}var d=!1,e=new IntersectionObserver(c,{threshold:[.1,.3,.5,.7,.9]}),f=amzncsm.videoViewability.getAdElement()||document.body;e.observe(f),amzncsm.setTimeout(function(){d===!1&&(d=!0,a.call(null,0))},500)},initVCompSafari:function(){function a(){var a,b,c=amzncsm.safv.pixelIfrs;if(c&&c.length>0){for(a=0;a<c.length;a++)b=c[a],b.parentNode.removeChild(b);amzncsm.safv.pixelIfrs=null}}function b(a,b){var c,d,e,f=document.createElement("IFRAME"),g='var vs = false; function step() { vs = true; }; function dv() { vs = false; window.requestAnimationFrame(step); window.setTimeout(function() { if (vs === true) { parent.postMessage(window.frameElement.id + " vs", "*"); } else { parent.postMessage(window.frameElement.id + " ivs", "*"); } }, 20); }; (function registerPostMessageHandler() { var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent"; var eventer = window[eventMethod]; var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message"; eventer(messageEvent, function(e) { var key = e.message ? "message" : "data"; var data = e[key]; if (data == "dv") { dv(); } }, false); })(); ';f.id=b,f.height=5,f.width=5,f.style.position="absolute",f.style.opacity=0;for(c in a)a.hasOwnProperty(c)&&(f.style[c]=a[c]);document.body.appendChild(f);try{d=f.contentDocument,d&&(d.open(),d.writeln("<!DOCTYPE html><html><head><title></title></head><body></body></html>"),d.close(),e=d.createElement("script"),e&&(e.type="text/javascript",e.text=g,d.body.appendChild(e)))}catch(h){amzncsm.reportClientError(h)}return amzncsm.safv.pixelIfrs.push(f),f}amzncsm.safv={itrCount:0,atfPixelFired:!1,pixelIfrs:[]},b({top:"20px",right:"20px"},"adcfTR"),b({bottom:"20px",left:"20px"},"adcfBL"),b({bottom:"20px",right:"20px"},"adcfBR"),b({top:"20px",left:"20px"},"adcfTL"),b({top:"50%",left:"50%"},"adcfCenter"),b({top:"-1000px",right:"-1000px"},"adcfInv"),amzncsm.setTimeout(function(){amzncsm.safv.atfPixelFired===!1&&amzncsm.safv.atfSuccessCb&&(amzncsm.safv.atfPixelFired=!0,amzncsm.safv.atfSuccessCb.call(null,0),a())},2e3),amzncsm.registerPostMessageHandler(function(a){var b=a.split(" ");"adcfInv"==b[0]?"vs"==b[1]?(amzncsm.safv.fp=!0,amzncsm.safv.vCount=0):amzncsm.safv.fp=!1:("vs"==b[1]||"ivs"==b[1])&&"vs"==b[1]&&amzncsm.safv.fp===!1&&amzncsm.safv.vCount++,amzncsm.safv.respCount++,6==amzncsm.safv.respCount&&(amzncsm.log("Visible pixel count "+amzncsm.safv.vCount),amzncsm.safv.itrCount++,amzncsm.safv.fp===!1&&amzncsm.safv.itrCount>2&&(1==amzncsm.safv.atfPixelFired?amzncsm.safv.viewSuccessCb.call(null,amzncsm.safv.vCount/5):amzncsm.safv.atfSuccessCb&&(amzncsm.safv.atfPixelFired=!0,amzncsm.safv.atfSuccessCb.call(null,amzncsm.safv.vCount/5))))})},fractionInViewportSafari:function(a,b){var c,d;if(amzncsm.safv.vCount=0,amzncsm.safv.respCount=0,amzncsm.safv.fp=!1,a?amzncsm.safv.atfSuccessCb=b:amzncsm.safv.viewSuccessCb=b,c=amzncsm.safv.pixelIfrs,c&&c.length>0)for(d=0;d<c.length;d++)c[d].contentWindow.postMessage("dv","*")},domHitTestingWithBoundary:function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o=Number.MAX_VALUE,p=Number.MAX_VALUE,q=Number.MIN_VALUE,r=Number.MIN_VALUE,s=0,t=0;for(k=a;b>=k;k+=e)for(l=c;d>=l;l+=f)s++,j=h.elementFromPoint(k,l),g.call(null,j)&&(t++,i===!0&&(o>k?o=k:k>q&&(q=k),p>l?p=l:l>r&&(r=l)));return m=q-o,n=r-p,(0>=m||0>=n)&&(m=0,n=0),amzncsm.log("domHitTestingWithBoundary: visiblePoints "+t+" totalPoints "+s+" visibleArea "+t/s),i?{height:n,width:m}:0!=s?t/s:0},detectActualDimension:function(a){if(amzncsm.isIntObsSupported()||amzncsm.isSafari())return 1;if(amzncsm.isIE()){var b=a.getBoundingClientRect().top,c=a.getBoundingClientRect().left,d=a.offsetWidth,e=a.offsetHeight,f=function(a){return null!=a};return this.domHitTestingWithBoundary(c,c+d,b,b+e,5,5,f,this.hostDoc,!1)}return amzncsm.isFirefox(),1}}),amzncsm=amzncsm||{},amzncsm.rm=function(){var a,b,c,d,e="v-1.6";return amzncsm.version=e,amzncsm.version=e+"-tpmv1",a={VDO:{videoViewability:!0,viewDuration:!0,domainMask:!0},supportedBrowsers:{IE:!0,Firefox:!0,Chrome:!0,Safari:!0,Other:!0},is3p:!1},amzncsm.config=a,b=function(a){var b,c,d,e=window.performance.getEntriesByType("measure"),f={};for(b=0;b<e.length;++b)e[b].name.endsWith(a)&&(c=e[b],d=c.name.substring(0,c.name.length-a.length),f[d]=c.duration.toFixed(2));amzncsm.pixelQueue.addPixel(JSON.stringify(f))},c=function(a,c){var e,f=c.e,g=c.w,h=c.d,i=c.vpObj,j=Math.round(1e7*Math.random()).toString();return amzncsm.csmReport=amzncsm.csmReport||{},amzncsm.csmReport.hasOwnProperty(j)?!1:(amzncsm.csmReport[j]={},amzncsm.log("Initiating CSM computation for ad slot "+j),d(a,f,g,h,j,i),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&window.performance.mark("csmStart"+j),a=a.toUpperCase(),amzncsm.api=a,e=new amzncsm.detectViewability(f,g,h,j),e.collectData&&e.collectData(),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&(window.performance.mark("csmEnd"+j),window.performance.measure("csmTot"+j,"csmStart"+j,"csmEnd"+j),b(j)),void(amzncsm.errors.length>0&&amzncsm.reportErrors()))},d=function(b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p;amzncsm.loadModules(f,[{name:"eventUtils",params:[]}]);for(h in amzncsm.eventUtils)amzncsm.eventUtils.hasOwnProperty(h)&&(amzncsm[h]=amzncsm.eventUtils[h]);amzncsm.loadModules(f,[{name:"utils",params:[]}]);for(h in amzncsm.utils)amzncsm.utils.hasOwnProperty(h)&&(amzncsm[h]=amzncsm.utils[h]);if(amzncsm.loadModules(f,[{name:"pixelQueue",params:[]}]),i=-1!==d.location.href.indexOf("csm_debug_mode"),i&&-1!==window.location.href.indexOf("csm_uems")){for(j=function(c){for(var d in a[b])a[b][d]=c},k=window.location.href.split("+").join(" "),l={},n=/[?&]?([^=]+)=([^&]*)/g;m=n.exec(k);)l[decodeURIComponent(m[1])]=decodeURIComponent(m[2]);for(o=l.csm_uems.split(","),j(!1),p=0;p<o.length;p++)"vd"==o[p]?a[b].viewDuration=!0:"hs"==o[p]?a[b].hoverStats=!0:"pm"==o[p]?a[b].pageMetrics=!0:"fm"==o[p]?a[b].fraudMetrics=!0:"all"==o[p]?j(!0):"none"==o[p]}a[b].videoViewability===!0&&amzncsm.loadModules(f,[{name:"videoViewability",params:[g,c]}]),a[b].viewDuration===!0&&(amzncsm.captureViewDuration=!0,amzncsm.loadModules(f,[{name:"viewDuration",params:[]}])),a[b].hoverStats===!0&&amzncsm.loadModules(f,[{name:"hoverStats",params:[c]}]),a[b].pageMetrics===!0&&amzncsm.loadModules(f,[{name:"pageMetrics",params:[d]}]),a[b].fraudMetrics===!0&&amzncsm.loadModules(f,[{name:"fraudMetrics",params:[d]}]),a[b].domainMask===!0&&amzncsm.loadModules(f,[{name:"domainMask",params:[]}])},c}();